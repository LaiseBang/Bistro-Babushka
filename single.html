<!DOCTYPE html>
<html lang="da">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Reataurant Babuska</title>
	<link rel="stylesheet" href="stylesheet.css">
</head>

<body>

	<header>
		<h1>Babuska</h1>
		<h2>- Russisk restaurant i hjertet af København</h2>
		<nav>
			<button id="filter-alle">Alle</button>
			<button id="filter-forretter">Forretter</button>
			<button id="filter-hovedretter">Hovedretter</button>
			<button id="filter-sideorders">Sideorders</button>
			<button id="filter-desserter">Desserter</button>
			<button id="filter-drikkevarer">Drikkevarer</button>
		</nav>
	</header>
	<main>
		<h3 id="overskrift" data-overskrift>Menu</h3>
		<section id="liste_single" data-liste>
			<article>
				<img src="" alt="" class="single_img" data-singleImg>
				<details open>
					<summary>Beskrivelse</summary>
					<p data-beskrivelse>lang tekst</p>
				</details>
			</article>
		</section>
	</main>

	<footer>
		<section>
			<address>
		Restaurant Babuska <br>Moskvagade 18<br>1060 København K<br>
		 </address>
			<aside> Åbningstider: <br>Mandag - Fredag: 10.30 - 22.00 <br> Lørdag: 12.00 - 23.00 <br> Søndag: Lukket </aside>
		</section>
	</footer>
	<script>
		//de skarpe parenterser i variablen viser at det er et array
		let urlParams = new URLSearchParams(window.location.search);
		let urlId = urlParams.get("id");
		let retter = [];

		document.addEventListener("DOMContentLoaded", hentJson);

		async function hentJson() {
			console.log("async function");
			let jsonData = await fetch("menu.json");
			retter = await jsonData.json();
			visRetter();
			lavFilter();
		}

		function visRetter() {
			console.log("vis ret");
			//document.querySelector("[data-overskrift]").textContent = overskrift;
			//loop
			retter.forEach(ret => {
				if (ret.id == urlId) {
					console.log(ret.id, urlId);
					document.querySelector("[data-singleImg]").src = "imgs/medium/" + ret.billede + "-md.jpg";
					document.querySelector("[data-singleImg]").alt = "Billede af " + ret.navn;
					document.querySelector("[data-overskrift]").textContent = ret.navn;
					document.querySelector("[data-beskrivelse]").textContent = ret.langbeskrivelse;
				}
			});
		}

		function showSingle() {
			let myId = this.getAttribute("data-id");
			let single = retter.find(ret => {
				if (myId == ret.id) {
					document.querySelector("#popup").style.visibility = "visible";
					document.querySelector("[data-titel]").textContent = ret.navn;
					document.querySelector("[data-singleImg]").src = "imgs/medium/" + ret.billede + "-md.jpg";
					document.querySelector("[data-singleImg]").alt = "Billede af " + ret.navn;
					document.querySelector("[data-beskrivelse]").textContent = ret.langbeskrivelse;
					document.querySelector("[data-pris]").textContent = ret.pris + ",- kr";
					document.querySelector("button").addEventListener("click", closeModal);
				}
			})
		}

		function lavFilter() {
			console.log("filter");
			let forretter = retter.filter(ret => ret.kategori == "forretter");
			let hovedretter = retter.filter(ret => ret.kategori == "hovedretter");
			let sideorders = retter.filter(ret => ret.kategori == "sideorders");
			let desserter = retter.filter(ret => ret.kategori == "desserter");
			let drikkevarer = retter.filter(ret => ret.kategori == "drikkevarer");

			//sorter retter efter kategori
			document.querySelector("#filter-alle").addEventListener("click", () => {
				location.href = "index.html";
			});
			document.querySelector("#filter-forretter").addEventListener("click", () => {
				location.href = "kategori.html?kategori=forretter";
			});
			document.querySelector("#filter-hovedretter").addEventListener("click", () => {
				location.href = "kategori.html?kategori=hovedretter";
			});
			document.querySelector("#filter-sideorders").addEventListener("click", () => {
				location.href = "kategori.html?kategori=sideorders";
			});
			document.querySelector("#filter-desserter").addEventListener("click", () => {
				location.href = "kategori.html?kategori=desserter";
			});
			document.querySelector("#filter-drikkevarer").addEventListener("click", () => {
				location.href = "kategori.html?kategori=drikkevarer";
			});
		};

	</script>
</body>

</html>
